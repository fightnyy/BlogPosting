# Spring IoC와 DI



## 왜 쓰는가

* 클라이언트 코드 등에 변경 없이 환경설정만으로도 프로그램을 제어할 수 있다.

### IoC

* 프로그램의 제어 흐름을 직접 제어하는 것이 아니라 **제3자가 관리**하는것

* 제어 흐름이라는 것은 아래와 같다.

  * 오브젝트 생성
  * 오브젝트 생명주기 관리
  * 메소드 수행 등

* 예시

  ```java
  public class A {
  	private B b;
    public A(){
      b = new B();
    }
  }
  
  // ---
  
  public class A {
    @Autowired
    private B b;
  }
  ```

  * 해당 코드를 보면 위의 분기점을 기준으로 차이점을 볼 수 있습니다.
    * 위는 개발자가 직접 클래스를 생성하고 있고 아래는 **스프링 컨테이너에서 직접 객체를 생성** 하여 해당 객체에 주입시켜주고 있습니다.
    * 즉, 내부 코드에서 자신이 어떤걸 사용할지 정하는것이 아닌 **외부에서 어떤걸 사용할지 정해주는 것** 인 현상을 **제어 역전, IoC** 라고 합니다.
  
 * **주의: `IoC` 는 스프링에서만 사용되는 개념이 아니다. ** 

 * 이점:

    * 유연하고 확장성이 뛰어나다
      * = 변경이 있을 때 수정이 쉽다
      * = 수정할 부분만 수정하면 된다
      * = 관심사의 분리가 잘 이루어졌다

### DI

* **클래스타입이 고정되어 있지 않고 인터페이스 타입의 파라미터를 통해 다이나믹하게 구현 클래스를 결정해서 제공받을수 있어야한다**
* 오브젝트를 스스로 생성하는 것이 아닌 외부로 부터 주입받는 기법
* 이점:
  * 유지 보수 비용이 적게든다.
  * 코드의 중복을 줄일 수 있다.





## IoC와 DI 의 차이점

* 즉, `DI` 는 `IoC` 개념이 적용된 결과물 중 하나이다.
  * 의존성을 주입한다는 것을 `IoC` 적인 행위로 볼 수 있지만 `IoC` 가 곧 의존성 주입이라고 보긴 어렵다.

* `IoC `는 객체의 흐름, 생명주기관리등 독립적인 제 3자에게 역할과 책임을 위임 하는 프로그래밍 모델

  * 범용적인 표현

* `DI` 는 인터페이스를 통해 다이나믹하게 객체를 주입하여 유연한 프로그래밍을 가능하도록 하는 패턴

  * 구체적인 의미

  



## 라이브러리와 프레임워크의 차이점

* `IoC` 관점으로 이를 설명하자면 다음과 같다.
  * 라이브러리는 내 코드가 라이브러리를 이용한다.
    * 즉, 제어권이 내 코드에 있다.
  * 프레임워크는 프레임워크가 나의 코드를 실행한다.
    * 즉, 제어권이 프레임워크에게 있다.